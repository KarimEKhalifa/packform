{"remainingRequest":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/karimkhalifa/Desktop/Packform/packform-frontend/src/views/Orders.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/src/views/Orders.vue","mtime":1594565304796},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojYXBwIHsKICBmb250LWZhbWlseTogQXZlbmlyLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOwogIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGNvbG9yOiAjMmMzZTUwOwogIG1hcmdpbi10b3A6IDYwcHg7Cn0K"},{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Orders.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"app\">\n    <h1>Welcome to orders!</h1>\n    <div style=\"display: flex; width: 500px; padding-bottom: 1vw; right: 0px;\">\n      <h2 style=\"margin: inherit; padding-right: 1vw;\">Choose date range </h2>\n        <DatePicker v-if=\"startDate\" :key=\"noSearch\" :start=\"startDate\" :end=\"endDate\" v-on:childToParent=\"onDateChange\" />\n    </div>\n    <div style=\"display:flex;\">\n      <h2 style=\"margin: inherit; padding-right: 1vw;\">Search </h2>\n        <SearchBar  v-on:childToParent=\"onSearchChange\" />\n    </div>\n    <Table v-if=\"tableData\" :URI=\"inUseURI\" :key=\"noSearch\" :myData=\"tableData\" :config=\"config\" />\n  </div>\n</template>\n\n<script>\nimport Table from \"./../components/Table.vue\";\nimport DatePicker from \"./../components/DatePicker\";\nimport SearchBar from \"./../components/SearchBar\";\n\nexport default {\n  name: \"Orders\",\n  components: {\n    DatePicker,\n    Table,\n    SearchBar\n  },\n  data: () => ({\n    tableData: undefined,\n    noSearch: 0,\n    startDate: \"\",\n    endDate: \"\",\n    page: 0,\n    searchString: \"\",\n    baseURI: \"http://localhost:8000\" ,\n    inUseURI:\"http://localhost:8000/api/orders/\",\n    config: [\n      {\n        key: \"order_name\",\n        title: \"Order Name\",\n        type: \"text\"\n      },\n      {\n        key: \"customer_company_name\",\n        title: \"Company Name\",\n        type: \"text\"\n      },\n      {\n        key: \"customer_name\",\n        title: \"Customer Name\",\n        type: \"text\"\n      },\n      {\n        key: \"order_date\",\n        title: \"Order Date\",\n        type: \"date\"\n      },\n      {\n        key: \"delivered_amount\",\n        title: \"Delivered Amount\",\n        type: \"currency\"\n      },\n      {\n        key: \"total_amount\",\n        title: \"Total Amount\",\n        type: \"currency\"\n      }\n    ]\n  }),\n  methods: {\n    getData: function() {\n      this.$axios.get(this.inUseURI + this.page).then(({ data }) => {\n        this.tableData = data;\n        if(this.noSearch == 0){\n        this.endDate = this.startDate = data[0][\"order_date\"].split(\"T\")[0]\n        }\n        this.noSearch += 1;\n      });\n    },\n    onSearchChange: function(value) {\n      this.searchString = value;\n      this.search();\n    },\n    onDateChange: function(value) {\n      var start = value.start\n        .toLocaleDateString()\n        .split(\"/\")\n        .reverse()\n        .join(\"-\");\n      var end = value.end\n        .toLocaleDateString()\n        .split(\"/\")\n        .reverse()\n        .join(\"-\");\n\n        if(start!= this.startDate || end != this.endDate){\n            this.startDate = start\n            this.endDate = end\n            this.inUseURI = this.baseURI+\"/api/orders/between/\" + this.startDate +\"/\"+this.endDate+ \"/\";\n            console.log(this.inUseURI)\n            this.getData()\n        }  \n    },\n    search: function() {\n      this.page = 0;\n      if(this.searchString.trim() !== \"\" && this.startDate!==this.endDate){\n        this.inUseURI = this.baseURI+\"/api/orders/search_between/\" + this.searchString + \"/\"+ this.startDate +\"/\"+this.endDate+ \"/\";\n      }else if (this.searchString.trim() === \"\" && this.startDate===this.endDate) {\n        this.inUseURI = this.baseURI+\"/api/orders/\";\n      } else {\n        this.inUseURI = this.baseURI+\"api/orders/\" + this.searchString + \"/\";\n      }\n      this.getData();\n    }\n  },\n  mounted() {\n    this.getData();\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n"]}]}