{"remainingRequest":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/karimkhalifa/Desktop/Packform/packform-frontend/src/views/Orders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/src/views/Orders.vue","mtime":1594565304796},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karimkhalifa/Desktop/Packform/packform-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUYWJsZSBmcm9tICIuLy4uL2NvbXBvbmVudHMvVGFibGUudnVlIjsKaW1wb3J0IERhdGVQaWNrZXIgZnJvbSAiLi8uLi9jb21wb25lbnRzL0RhdGVQaWNrZXIiOwppbXBvcnQgU2VhcmNoQmFyIGZyb20gIi4vLi4vY29tcG9uZW50cy9TZWFyY2hCYXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJPcmRlcnMiLAogIGNvbXBvbmVudHM6IHsKICAgIERhdGVQaWNrZXIsCiAgICBUYWJsZSwKICAgIFNlYXJjaEJhcgogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHRhYmxlRGF0YTogdW5kZWZpbmVkLAogICAgbm9TZWFyY2g6IDAsCiAgICBzdGFydERhdGU6ICIiLAogICAgZW5kRGF0ZTogIiIsCiAgICBwYWdlOiAwLAogICAgc2VhcmNoU3RyaW5nOiAiIiwKICAgIGJhc2VVUkk6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAiICwKICAgIGluVXNlVVJJOiJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL29yZGVycy8iLAogICAgY29uZmlnOiBbCiAgICAgIHsKICAgICAgICBrZXk6ICJvcmRlcl9uYW1lIiwKICAgICAgICB0aXRsZTogIk9yZGVyIE5hbWUiLAogICAgICAgIHR5cGU6ICJ0ZXh0IgogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAiY3VzdG9tZXJfY29tcGFueV9uYW1lIiwKICAgICAgICB0aXRsZTogIkNvbXBhbnkgTmFtZSIsCiAgICAgICAgdHlwZTogInRleHQiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICJjdXN0b21lcl9uYW1lIiwKICAgICAgICB0aXRsZTogIkN1c3RvbWVyIE5hbWUiLAogICAgICAgIHR5cGU6ICJ0ZXh0IgogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAib3JkZXJfZGF0ZSIsCiAgICAgICAgdGl0bGU6ICJPcmRlciBEYXRlIiwKICAgICAgICB0eXBlOiAiZGF0ZSIKICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogImRlbGl2ZXJlZF9hbW91bnQiLAogICAgICAgIHRpdGxlOiAiRGVsaXZlcmVkIEFtb3VudCIsCiAgICAgICAgdHlwZTogImN1cnJlbmN5IgogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAidG90YWxfYW1vdW50IiwKICAgICAgICB0aXRsZTogIlRvdGFsIEFtb3VudCIsCiAgICAgICAgdHlwZTogImN1cnJlbmN5IgogICAgICB9CiAgICBdCiAgfSksCiAgbWV0aG9kczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuJGF4aW9zLmdldCh0aGlzLmluVXNlVVJJICsgdGhpcy5wYWdlKS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YTsKICAgICAgICBpZih0aGlzLm5vU2VhcmNoID09IDApewogICAgICAgIHRoaXMuZW5kRGF0ZSA9IHRoaXMuc3RhcnREYXRlID0gZGF0YVswXVsib3JkZXJfZGF0ZSJdLnNwbGl0KCJUIilbMF0KICAgICAgICB9CiAgICAgICAgdGhpcy5ub1NlYXJjaCArPSAxOwogICAgICB9KTsKICAgIH0sCiAgICBvblNlYXJjaENoYW5nZTogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgdGhpcy5zZWFyY2hTdHJpbmcgPSB2YWx1ZTsKICAgICAgdGhpcy5zZWFyY2goKTsKICAgIH0sCiAgICBvbkRhdGVDaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIHZhciBzdGFydCA9IHZhbHVlLnN0YXJ0CiAgICAgICAgLnRvTG9jYWxlRGF0ZVN0cmluZygpCiAgICAgICAgLnNwbGl0KCIvIikKICAgICAgICAucmV2ZXJzZSgpCiAgICAgICAgLmpvaW4oIi0iKTsKICAgICAgdmFyIGVuZCA9IHZhbHVlLmVuZAogICAgICAgIC50b0xvY2FsZURhdGVTdHJpbmcoKQogICAgICAgIC5zcGxpdCgiLyIpCiAgICAgICAgLnJldmVyc2UoKQogICAgICAgIC5qb2luKCItIik7CgogICAgICAgIGlmKHN0YXJ0IT0gdGhpcy5zdGFydERhdGUgfHwgZW5kICE9IHRoaXMuZW5kRGF0ZSl7CiAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gc3RhcnQKICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gZW5kCiAgICAgICAgICAgIHRoaXMuaW5Vc2VVUkkgPSB0aGlzLmJhc2VVUkkrIi9hcGkvb3JkZXJzL2JldHdlZW4vIiArIHRoaXMuc3RhcnREYXRlICsiLyIrdGhpcy5lbmREYXRlKyAiLyI7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW5Vc2VVUkkpCiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICAgICAgfSAgCiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5wYWdlID0gMDsKICAgICAgaWYodGhpcy5zZWFyY2hTdHJpbmcudHJpbSgpICE9PSAiIiAmJiB0aGlzLnN0YXJ0RGF0ZSE9PXRoaXMuZW5kRGF0ZSl7CiAgICAgICAgdGhpcy5pblVzZVVSSSA9IHRoaXMuYmFzZVVSSSsiL2FwaS9vcmRlcnMvc2VhcmNoX2JldHdlZW4vIiArIHRoaXMuc2VhcmNoU3RyaW5nICsgIi8iKyB0aGlzLnN0YXJ0RGF0ZSArIi8iK3RoaXMuZW5kRGF0ZSsgIi8iOwogICAgICB9ZWxzZSBpZiAodGhpcy5zZWFyY2hTdHJpbmcudHJpbSgpID09PSAiIiAmJiB0aGlzLnN0YXJ0RGF0ZT09PXRoaXMuZW5kRGF0ZSkgewogICAgICAgIHRoaXMuaW5Vc2VVUkkgPSB0aGlzLmJhc2VVUkkrIi9hcGkvb3JkZXJzLyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pblVzZVVSSSA9IHRoaXMuYmFzZVVSSSsiYXBpL29yZGVycy8iICsgdGhpcy5zZWFyY2hTdHJpbmcgKyAiLyI7CiAgICAgIH0KICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXREYXRhKCk7CiAgfQp9Owo="},{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Orders.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"app\">\n    <h1>Welcome to orders!</h1>\n    <div style=\"display: flex; width: 500px; padding-bottom: 1vw; right: 0px;\">\n      <h2 style=\"margin: inherit; padding-right: 1vw;\">Choose date range </h2>\n        <DatePicker v-if=\"startDate\" :key=\"noSearch\" :start=\"startDate\" :end=\"endDate\" v-on:childToParent=\"onDateChange\" />\n    </div>\n    <div style=\"display:flex;\">\n      <h2 style=\"margin: inherit; padding-right: 1vw;\">Search </h2>\n        <SearchBar  v-on:childToParent=\"onSearchChange\" />\n    </div>\n    <Table v-if=\"tableData\" :URI=\"inUseURI\" :key=\"noSearch\" :myData=\"tableData\" :config=\"config\" />\n  </div>\n</template>\n\n<script>\nimport Table from \"./../components/Table.vue\";\nimport DatePicker from \"./../components/DatePicker\";\nimport SearchBar from \"./../components/SearchBar\";\n\nexport default {\n  name: \"Orders\",\n  components: {\n    DatePicker,\n    Table,\n    SearchBar\n  },\n  data: () => ({\n    tableData: undefined,\n    noSearch: 0,\n    startDate: \"\",\n    endDate: \"\",\n    page: 0,\n    searchString: \"\",\n    baseURI: \"http://localhost:8000\" ,\n    inUseURI:\"http://localhost:8000/api/orders/\",\n    config: [\n      {\n        key: \"order_name\",\n        title: \"Order Name\",\n        type: \"text\"\n      },\n      {\n        key: \"customer_company_name\",\n        title: \"Company Name\",\n        type: \"text\"\n      },\n      {\n        key: \"customer_name\",\n        title: \"Customer Name\",\n        type: \"text\"\n      },\n      {\n        key: \"order_date\",\n        title: \"Order Date\",\n        type: \"date\"\n      },\n      {\n        key: \"delivered_amount\",\n        title: \"Delivered Amount\",\n        type: \"currency\"\n      },\n      {\n        key: \"total_amount\",\n        title: \"Total Amount\",\n        type: \"currency\"\n      }\n    ]\n  }),\n  methods: {\n    getData: function() {\n      this.$axios.get(this.inUseURI + this.page).then(({ data }) => {\n        this.tableData = data;\n        if(this.noSearch == 0){\n        this.endDate = this.startDate = data[0][\"order_date\"].split(\"T\")[0]\n        }\n        this.noSearch += 1;\n      });\n    },\n    onSearchChange: function(value) {\n      this.searchString = value;\n      this.search();\n    },\n    onDateChange: function(value) {\n      var start = value.start\n        .toLocaleDateString()\n        .split(\"/\")\n        .reverse()\n        .join(\"-\");\n      var end = value.end\n        .toLocaleDateString()\n        .split(\"/\")\n        .reverse()\n        .join(\"-\");\n\n        if(start!= this.startDate || end != this.endDate){\n            this.startDate = start\n            this.endDate = end\n            this.inUseURI = this.baseURI+\"/api/orders/between/\" + this.startDate +\"/\"+this.endDate+ \"/\";\n            console.log(this.inUseURI)\n            this.getData()\n        }  \n    },\n    search: function() {\n      this.page = 0;\n      if(this.searchString.trim() !== \"\" && this.startDate!==this.endDate){\n        this.inUseURI = this.baseURI+\"/api/orders/search_between/\" + this.searchString + \"/\"+ this.startDate +\"/\"+this.endDate+ \"/\";\n      }else if (this.searchString.trim() === \"\" && this.startDate===this.endDate) {\n        this.inUseURI = this.baseURI+\"/api/orders/\";\n      } else {\n        this.inUseURI = this.baseURI+\"api/orders/\" + this.searchString + \"/\";\n      }\n      this.getData();\n    }\n  },\n  mounted() {\n    this.getData();\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n"]}]}